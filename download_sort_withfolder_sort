import os
import shutil
from pathlib import Path

# ðŸ“‚ Source (Downloads) and Destination (your external HDD)
downloads = Path.home() / "Downloads"
destination = Path("F:/Download")

# Create destination if it doesn't exist
destination.mkdir(exist_ok=True)

# --- Move files first (sorted smallest â†’ largest) ---
files = [(f, f.stat().st_size) for f in downloads.iterdir() if f.is_file()]
files.sort(key=lambda x: x[1])

for f, size in files:
    ext = f.suffix.lower()[1:] if f.suffix else "Others"
    ext_folder = destination / ext
    ext_folder.mkdir(exist_ok=True)

    new_path = ext_folder / f.name
    shutil.move(str(f), str(new_path))

    print(f"Moved FILE: {f.name} â†’ {ext_folder} ({size/1024:.2f} KB)")

# --- Now move folders ---
folders = [d for d in downloads.iterdir() if d.is_dir()]
folders_dest = destination / "folders"
folders_dest.mkdir(exist_ok=True)

for folder in folders:
    new_path = folders_dest / folder.name
    shutil.move(str(folder), str(new_path))
    print(f"Moved FOLDER: {folder.name} â†’ {folders_dest}")
    

print("\nâœ… All files and folders moved successfully!")
